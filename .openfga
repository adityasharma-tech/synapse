model
  schema 1.1

type user

type app
    relations
        define admin: [user]
        define streamer: [user]
        define user: [user]


type stream
    relations
        define creator: [user]
        define app_admin: [app#admin]
        define app_streamer: [app#streamer]

        define blocker: creator or app_admin
        define blocked: [user]


        define can_stream: creator or app_admin or app_streamer
        define can_delete: creator or app_admin
        define can_update: creator

        define viewer: [app#user]
        define can_view: viewer but not blocked


type chat
    relations
        define creator: [stream#viewer, stream#creator, stream#app_admin, stream#app_streamer]
        define streamer: [stream#creator]
        define app_admin: [stream#creator]
        define blocked: [stream#blocked]

        define can_create: creator but not blocked
        define can_delete: creator or streamer or app_admin
        define can_update: creator



# // App roles
# app:main#user@user:3
# app:main#streamer@user:2
# app:main#admin@user:1

# // Stream setup
# stream:abc#creator@user:2
# stream:abc#app_admin@app:main
# stream:abc#app_streamer@app:main
# stream:abc#viewer@app:main

# // Block user:3 from this specific stream
# stream:abc#blocked@user:3
